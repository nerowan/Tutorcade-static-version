<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>APÂ Psychologyâ€¯InteractiveÂ Lab</title>

<!-- â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘
     GLOBALâ€¯THEME / UI
â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘ -->
<style>
/* ===== CSSÂ RESETÂ (mini) ===== */
*{margin:0;padding:0;box-sizing:border-box;font-family:system-ui,SegoeÂ UI,Roboto,Helvetica,Arial,sans-serif}
button{cursor:pointer;border:none;background:none}

/* ===== ROOTÂ TOKENS (light/dark ready) ===== */
:root{
  --bg:#f6f8fa;
  --surface:#ffffff;
  --surface-2:#e9eef2;
  --primary:#536dfe;
  --primary-dark:#304ffe;
  --accent:#ff4081;
  --text:#1b1f23;
  --text-light:#555;
  --radius:12px;
  --shadow:0 4px 12px rgba(0,0,0,.08);
}
@media (prefers-color-scheme: dark){
  :root{
    --bg:#0d1117;
    --surface:#161b22;
    --surface-2:#21262d;
    --primary:#8c9eff;
    --primary-dark:#536dfe;
    --accent:#ff77a9;
    --text:#e6edf3;
    --text-light:#9ba4b0;
    --shadow:0 4px 12px rgba(0,0,0,.5);
  }
}

/* ===== LAYOUTÂ CONTAINERS ===== */
body{background:var(--bg);color:var(--text);height:100vh;display:flex;flex-direction:column}
header{display:flex;align-items:center;justify-content:space-between;padding:1rem 1.5rem;background:var(--surface);box-shadow:var(--shadow);z-index:5}
header h1{font-size:clamp(1.2rem,2vw,1.6rem);font-weight:600;letter-spacing:.03em}
header nav button{padding:.5rem 1rem;border-radius:var(--radius);background:var(--primary);color:#fff;font-weight:600;transition:.2s}
header nav button:hover{background:var(--primary-dark);transform:translateY(-1px)}

main{flex:1;display:grid;place-items:center;padding:1rem;overflow:hidden}
#screen{width:100%;max-width:1000px;height:100%;background:var(--surface);border-radius:var(--radius);box-shadow:var(--shadow);overflow:auto;position:relative;animation:fade 300ms ease}
@keyframes fade{from{opacity:0;transform:scale(.98)}to{opacity:1;transform:scale(1)}}

/* ===== GENERIC UIÂ COMPONENTS ===== */
.section{padding:2rem 3rem}
h2{font-size:clamp(1.1rem,2.5vw,1.4rem);margin-bottom:1rem;letter-spacing:.02em}
p{line-height:1.55;margin:.6rem 0;color:var(--text-light)}
.flex{display:flex;gap:1rem;flex-wrap:wrap;align-items:center}
.card{background:var(--surface-2);padding:1.5rem;border-radius:var(--radius);flex:1 1 250px;min-width:240px;text-align:center;box-shadow:var(--shadow);transition:.2s}
.card h3{margin-bottom:.5rem;font-size:1.1rem}
.card:hover{transform:translateY(-4px);box-shadow:0 6px 14px rgba(0,0,0,.12)}

.btn{padding:.7rem 1.4rem;border-radius:var(--radius);background:var(--primary);color:#fff;font-weight:600;letter-spacing:.02em;transition:.2s}
.btn:hover{background:var(--primary-dark);transform:translateY(-1px)}
.btn.accent{background:var(--accent)}
.btn.outline{background:none;color:var(--primary);border:2px solid var(--primary)}
.btn.outline:hover{background:var(--primary);color:#fff}

.hidden{display:none !important}

/* ===== RESPONSIVE TWEAKS ===== */
@media (max-width:600px){
  .section{padding:1.5rem}
  header h1{display:none}
  header nav button{padding:.5rem .8rem}
}
</style>
</head>



<!-- â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘
          BODY
â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘ -->
<body>

<header>
  <h1>APÂ PsychologyÂ InteractiveÂ Lab</h1>

  <nav class="flex">
    <!-- Language toggle (simple) -->
    <button id="langToggle" class="btn outline" title="ä¸­æ–‡ / English">ä¸­æ–‡</button>
    <!-- Exit back to launcher -->
    <a href="launcher.html"><button class="btn accent">ExitÂ toÂ Launcher</button></a>
  </nav>
</header>

<main>
  <!-- Dynamic content will be injected here -->
  <div id="screen"></div>
</main>



<!-- â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘
             JS
â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘â€‘ -->
<script>
/* =======================================================================
   GLOBALÂ STATE & helpers
==========================================================================*/
const State={
  lang:'en',           // 'en' | 'zh'
  module:null,         // current module id
  profile:{credits:0}, // can be expanded
};
const $=q=>document.querySelector(q);
const $$=q=>[...document.querySelectorAll(q)];
function _(k){return Strings[State.lang][k]||k}

/* =======================================================================
   STRINGSÂ (i18n)  â€“Â extend as needed
==========================================================================*/
const Strings={
  en:{
    start:'Startâ€¯Lab',
    continue:'Continue',
    back:'Back',
    credits:'Credits',
    main_intro:`Welcome to the *APÂ Psychology Interactive Lab*!  
Choose an experiment, solve the challenge, and earn research credits.`,
    module_cc:'ClassicalÂ ConditioningÂ Arena',
    module_mm:'MemoryÂ Maze',
    module_sd:'SocialÂ DilemmaÂ Simulator',
    module_dev:'DevelopmentÂ Lab',
    module_cc_desc:'Pair stimuli and observe salivation like Pavlovâ€”can you optimize learning speed?',
    module_mm_desc:'Traverse a 3â€‘level maze that tests your sensory, working, and longâ€‘term memory.',
    module_sd_desc:'Face peer pressure and conformity trials reminiscent of Asch & Milgram.',
    module_dev_desc:'Order milestones and test theories from Piaget, Erikson, Kohlberg.',
    earned:`You earned`,
    credits_word:`credits!`,
  },
  zh:{
    start:'å¼€å§‹å®éªŒ',
    continue:'ç»§ç»­',
    back:'è¿”å›',
    credits:'å­¦åˆ†',
    main_intro:`æ¬¢è¿æ¥åˆ° **APå¿ƒç†å­¦äº¤äº’å®éªŒå®¤**ï¼  
è¯·æŒ‘é€‰å®éªŒï¼Œå®ŒæˆæŒ‘æˆ˜ï¼Œèµšå–å­¦æœ¯å­¦åˆ†ã€‚`,
    module_cc:'ç»å…¸æ¡ä»¶ä½œç”¨ç«æŠ€åœº',
    module_mm:'è®°å¿†è¿·å®«',
    module_sd:'ç¤¾ä¼šå›°å¢ƒæ¨¡æ‹Ÿå™¨',
    module_dev:'å‘å±•å¿ƒç†å­¦å®éªŒå®¤',
    module_cc_desc:'åƒå·´ç”«æ´›å¤«ä¸€æ ·é…å¯¹åˆºæ¿€å¹¶è§‚å¯Ÿå”¾æ¶²åˆ†æ³Œâ€”â€”èƒ½å¦æœ€é€Ÿå­¦ä¹ ï¼Ÿ',
    module_mm_desc:'ä¸‰å±‚è¿·å®«è€ƒå¯Ÿæ„Ÿå®˜è®°å¿†ã€å·¥ä½œè®°å¿†ä¸é•¿æ—¶è®°å¿†ã€‚',
    module_sd_desc:'é¢å¯¹ä»ä¼—ä¸æƒå¨å‹åŠ›ï¼Œé‡ç°é˜¿å¸Œä¸ç±³å°”æ ¼æ‹‰å§†çš„ç»å…¸ç ”ç©¶ã€‚',
    module_dev_desc:'æ’åˆ—é‡Œç¨‹ç¢‘ï¼Œæ£€éªŒçš®äºšæ°ã€åŸƒé‡Œå…‹æ£®ã€ç§‘å°”ä¼¯æ ¼ç†è®ºã€‚',
    earned:`ä½ è·å¾—äº†`,
    credits_word:`å­¦åˆ†ï¼`,
  }
};

/* =======================================================================
   TEMPLATES
==========================================================================*/
const Screens={
  /* ---------- HOME / HUB ---------- */
  home:()=>`
    <div class="section">
      <h2>${_('main_intro')}</h2>
      <br/>
      <div class="flex">
        ${Card('cc')}
        ${Card('mm')}
        ${Card('sd')}
        ${Card('dev')}
      </div>
      <br/><br/>
      <p><strong>${_('credits')}:</strong> <span id="creditCount">${State.profile.credits}</span></p>
    </div>`,
  /* ---------- CLASSICALÂ CONDITIONING ---------- */
  cc:()=>`
    <div class="section">
      <button class="btn outline" onclick="goHome()">${_('back')}</button>
      <h2>${_('module_cc')}</h2>
      <p>Meet *Pavlovâ€™s Roboâ€‘Dog*.  
      Your goal: pair the bell (neutral stimulus) with food (unconditioned stimulus) until the bell alone elicits salivation.</p>

      <div class="flex" style="margin-top:1.5rem">
        <button class="btn" onclick="ccPair()">&nbsp;ğŸ””Â RingÂ BellÂ +Â ğŸ–&nbsp;</button>
        <button class="btn outline" onclick="ccTest()">&nbsp;ğŸ””Â RingÂ BellÂ Only&nbsp;</button>
      </div>
      <br/>
      <p id="ccStatus"></p>
    </div>`,
  /* ---------- MEMORYÂ MAZE ---------- */
  mm:()=>`
    <div class="section">
      <button class="btn outline" onclick="goHome()">${_('back')}</button>
      <h2>${_('module_mm')}</h2>
      <p>Youâ€™ll see a pattern of icons. Reproduce it from memory.  
      Each level adds one more item.</p>
      <br/><br/>
      <div id="mmPanel" class="flex"></div>
      <br/>
      <div id="mmInput" class="flex"></div>
      <p id="mmMsg"></p>
    </div>`,
  /* ---------- SOCIALÂ DILEMMA ---------- */
  sd:()=>`
    <div class="section">
      <button class="btn outline" onclick="goHome()">${_('back')}</button>
      <h2>${_('module_sd')}</h2>
      <p>A group unanimously picks the wrong answer to a simple lineâ€‘length task.  
      Do you conform (<em>${_('continue')}</em> with group) or stay independent (<em>${_('back')}</em>)?</p>
      <br/>
      <div class="flex">
        <button class="btn" onclick="sdDecision(true)">ğŸ™‹â€â™‚ï¸Â Conform</button>
        <button class="btn outline" onclick="sdDecision(false)">ğŸ™…â€â™€ï¸Â Stay Independent</button>
      </div>
      <p id="sdMsg" style="margin-top:1rem"></p>
    </div>`,
  /* ---------- DEVELOPMENTÂ LAB ---------- */
  dev:()=>`
    <div class="section">
      <button class="btn outline" onclick="goHome()">${_('back')}</button>
      <h2>${_('module_dev')}</h2>
      <p>DragÂ &Â drop Piagetâ€™s stages into correct chronological order.</p>
      <br/>
      <ul id="devList" style="list-style:none;padding:0"></ul>
      <p id="devMsg"></p>
    </div>`
};
/* Helpers to produce module cards */
function Card(id){
  return `<div class="card" onclick="openModule('${id}')">
      <h3>${_('module_'+id)}</h3>
      <p>${_('module_'+id+'_desc')}</p>
    </div>`;
}

/* =======================================================================
   NAVIGATION
==========================================================================*/
function render(html){$('#screen').innerHTML=html}
function goHome(){State.module=null;render(Screens.home());updateCredits()}
function openModule(id){State.module=id;render(Screens[id]());initModule(id)}
window.addEventListener('load',goHome);

/* =======================================================================
   MODULEÂ LOGIC
==========================================================================*/

/* === ClassicalÂ Conditioning === */
let ccTrials=0,ccLearned=false;
function initCC(){ccTrials=0;ccLearned=false;$('#ccStatus').textContent=''}
function ccPair(){
  if(ccLearned){msg(_('earned')+'Â 5Â '+_('credits_word'));return}
  ccTrials++;
  $('#ccStatus').textContent=`Pairing #${ccTrials}â€¦ Salivation!`
  if(ccTrials>=3){ccLearned=true;award(5);$('#ccStatus').textContent='Conditioned! The bell alone now triggers salivation.'}
}
function ccTest(){
  if(ccLearned){$('#ccStatus').textContent='ğŸ””Â Bell ringsâ€¦ Salivation confirmed!'}
  else{$('#ccStatus').textContent='ğŸ””Â Bell ringsâ€¦ No salivation yet.'}
}

/* === MemoryÂ Maze === */
let mmSeq=[],mmUser=[];
function initMM(){mmSeq=[];mmUser=[];$('#mmMsg').textContent='';nextMM()}
function icons(){return ['ğŸ','ğŸš€','ğŸ¸','ğŸ¶','ğŸŒˆ','âš½ï¸','ğŸ²','ğŸ“š','ğŸ§','ğŸ§©']}
function nextMM(){
  mmSeq.push(rnd(icons()));
  showSequence();
}
function rnd(arr){return arr[Math.floor(Math.random()*arr.length)]}
function showSequence(){
  $('#mmPanel').innerHTML=mmSeq.map(i=>`<span style="font-size:2rem">${i}</span>`).join(' ');
  $('#mmInput').innerHTML='';
  mmUser=[];
  setTimeout(()=>{$('#mmPanel').innerHTML='';drawChoices()},1000*mmSeq.length+800);
}
function drawChoices(){
  $('#mmInput').innerHTML=icons().map(ic=>
    `<button class="btn outline" onclick="pickMM('${ic}')">${ic}</button>`).join('');
}
function pickMM(ic){
  mmUser.push(ic);
  if(mmUser.length===mmSeq.length){
    $('#mmInput').innerHTML='';
    validateMM();
  }
}
function validateMM(){
  if(JSON.stringify(mmUser)===JSON.stringify(mmSeq)){
    award(3*mmSeq.length);
    $('#mmMsg').textContent=`Correct (${mmSeq.length})! Next levelâ€¦`;
    nextMM();
  }else{
    $('#mmMsg').textContent='Oopsâ€”wrong sequence. Restarting level.';
    mmUser=[];drawChoices();
  }
}

/* === SocialÂ Dilemma === */
function initSD(){$('#sdMsg').textContent=''}
function sdDecision(conf){
  const msg=conf
    ?'You conformed. Group harmony maintained; accuracy lost.'
    :'You resisted! Independent thought preserved.';
  $('#sdMsg').textContent=msg;
  award(conf?2:4);
}

/* === DevelopmentÂ Lab === */
function initDEV(){
  $('#devMsg').textContent='';
  const stages=['Sensorimotor','Preâ€‘operational','ConcreteÂ Operational','FormalÂ Operational'];
  const shuffled=stages.sort(()=>Math.random()-.5);
  $('#devList').innerHTML=shuffled.map(st=>`<li draggable="true" ondragstart="drag(event)"
        style="padding:.6rem 1rem;margin:.4rem 0;background:var(--surface-2);border-radius:var(--radius);box-shadow:var(--shadow);">${st}</li>`).join('');
  $('#devList').ondragover=e=>e.preventDefault();
  $('#devList').ondrop=drop;
}
let dragEl=null;
function drag(e){dragEl=e.target}
function drop(e){
  if(e.target.tagName!=='LI')return;
  const list=$('#devList');
  list.insertBefore(dragEl,e.target.nextSibling);
  checkDEV();
}
function checkDEV(){
  const order=[...$('#devList').children].map(li=>li.textContent.trim());
  if(order.join()===['Sensorimotor','Preâ€‘operational','ConcreteÂ Operational','FormalÂ Operational'].join()){
    $('#devMsg').textContent='Perfect! Stage order correct.';
    award(6);
  }else{$('#devMsg').textContent='Keep arrangingâ€¦'}
}

/* Dispatch moduleâ€‘specific initialisers */
function initModule(id){
  ({cc:initCC,mm:initMM,sd:initSD,dev:initDEV})[id]();
}

/* =======================================================================
   CREDITS & UTIL
==========================================================================*/
function award(n){State.profile.credits+=n;updateCredits();msg(`${_('earned')}Â ${n}Â ${_('credits_word')}`)}
function updateCredits(){$('#creditCount')&&($('#creditCount').textContent=State.profile.credits)}
function msg(t){alert(t)}

/* =======================================================================
   LANGUAGEÂ TOGGLE
==========================================================================*/
$('#langToggle').onclick=()=>{
  State.lang=State.lang==='en'?'zh':'en';
  $('#langToggle').textContent=State.lang==='en'?'ä¸­æ–‡':'EN';
  if(State.module){render(Screens[State.module]());initModule(State.module)}
  else{goHome();}
};

/* =======================================================================
   STORAGEÂ (save on unload) â€“Â simple localStorage example
==========================================================================*/
window.addEventListener('beforeunload',()=>localStorage.setItem('psychProfile',JSON.stringify(State.profile)));
window.addEventListener('load',()=>{
  const saved=localStorage.getItem('psychProfile');
  if(saved)State.profile=JSON.parse(saved);
});
</script>

</body>
</html>
